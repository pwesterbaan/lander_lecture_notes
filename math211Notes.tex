\documentclass[mathNotesPreamble]{subfiles}
%% Externalize graphics and save in ./images/ folder
%% pdflatex --shell-escape <tex file>
%% The document can be compiled with the two following
%% lines commented out, but will recompile all figures
%% each time.
\usetikzlibrary{external}
\tikzexternalize[prefix=images/]

%https://tex.stackexchange.com/a/216321/190910
% define main directory depending on file
\providecommand{\subfiles}{./subfiles}
\begin{document}
  \makeatletter
  \title{Math 211 Class notes\\[0.25\baselineskip]\TheSemester}
  \author{Peter Westerbaan}

  \pagestyle{headandfoot}
  \newcommand{\currentname}{\@currentlabelname}

  \runningfootrule
  \runningfooter{\parbox{0.45\linewidth}{\currentname}}{\thepage}{\@title}
  \makeatother

  %% Title
  \pagenumbering{roman}
  \vspace*{\stretch{1}}
  \begin{center}
    \makeatletter
    {\huge
    \@title}\\[\baselineskip]
    To accompany\\
    \emph{Essential Statistics: Exploring the World through Data}\\
    by \emph{Gould, Wong,} and \emph{Ryan} \\[\baselineskip]
    \@author\\[\baselineskip]
    Last updated:
    \@date\\
    \makeatother
  \end{center}
  \vspace*{\stretch{1}}
  \thispagestyle{empty}
  \pagebreak
  \pagestyle{headandfoot}

  \renewcommand{\contentsname}{Table Of Contents}
  \renewcommand\thesection{}
  \tableofcontents
  \newpage

  \makeatletter
  \firstpageheader{}{}{}
  \firstpagefooter{\parbox{0.45\linewidth}{\currentname}}{\thepage}{\@title}
  \firstpagefootrule
  \makeatother
  \pagenumbering{arabic}
  \setcounter{page}{1}
  %% everything else

  \relscale{1.4}

  % \subfile{subfiles/}

  \phantomsection\addcontentsline{toc}{section}{\Large \protect Unit 1 -- Data and the Stories They Tell}
  \subfile{subfiles/essentialStats_gould_1p1.tex}
  \subfile{subfiles/essentialStats_gould_1p2.tex}
  \subfile{subfiles/essentialStats_gould_1p4.tex}
  \subfile{subfiles/essentialStats_gould_1p5.tex}
  \subfile{subfiles/essentialStats_gould_2p1.tex}
  \subfile{subfiles/essentialStats_gould_2p2.tex}
  \subfile{subfiles/essentialStats_gould_2p3.tex}
  \subfile{subfiles/essentialStats_gould_2p4.tex}
  \subfile{subfiles/essentialStats_gould_2p5.tex}
  \subfile{subfiles/essentialStats_gould_3p1.tex}
  \subfile{subfiles/essentialStats_gould_3p2.tex}
  \subfile{subfiles/essentialStats_gould_3p3.tex}
  \subfile{subfiles/essentialStats_gould_3p4.tex}
  \subfile{subfiles/essentialStats_gould_3p5.tex}
  \phantomsection \addcontentsline{toc}{section}{\protect \Large Unit 2 -- Using Models to Describe the World}
  \subfile{subfiles/essentialStats_gould_4p1.tex}
  \subfile{subfiles/essentialStats_gould_4p2.tex}
  \subfile{subfiles/essentialStats_gould_4p3.tex}
  \subfile{subfiles/essentialStats_gould_4p4.tex}
  \subfile{subfiles/essentialStats_gould_6p1.tex}
  \subfile{subfiles/essentialStats_gould_6p2.tex}
  \subfile{subfiles/essentialStats_gould_7p1.tex}
  \subfile{subfiles/essentialStats_gould_7p2.tex}
  \subfile{subfiles/essentialStats_gould_7p3.tex}
  \phantomsection\addcontentsline{toc}{section}{\Large Unit 3 -- Inference: Turning Data into Knowledge}
  \subfile{subfiles/essentialStats_gould_7p4.tex}
  \subfile{subfiles/essentialStats_gould_8p1.tex}
  \subfile{subfiles/essentialStats_gould_8p2.tex}
  \subfile{subfiles/essentialStats_gould_8p3.tex}
  \subfile{subfiles/essentialStats_gould_9p1.tex}
  \subfile{subfiles/essentialStats_gould_9p2.tex}
  \subfile{subfiles/essentialStats_gould_9p3.tex}
  \subfile{subfiles/essentialStats_gould_9p4.tex}

\end{document}
