\documentclass[mathNotesPreamble]{subfiles}
%% Externalize graphics and save in ./images/ folder
%% pdflatex --shell-escape <tex file>
%% latexmk -pdf -e '$latex=q/latex %O -shell-escape %S/'
%% The document can be compiled with the two following
%% lines commented out, but will recompile all figures
%% each time.
\usetikzlibrary{external}
\tikzexternalize[prefix=images/]

%https://tex.stackexchange.com/a/216321/190910
% define subfiles directory depending on file
\providecommand{\subfiles}{./subfiles}
\begin{document}
  \makeatletter
  \title{Math 123 Class notes\\[0.25\baselineskip]\TheSemester}
  \author{Peter Westerbaan}

  \pagestyle{headandfoot}
  \newcommand{\currentname}{\@currentlabelname}

  \runningfootrule
  \runningfooter{\parbox{0.45\linewidth}{\currentname}}{\thepage}{\@title}
  \makeatother

  %% Title
  \pagenumbering{roman}
  \vspace*{\stretch{1}}
  \begin{center}
    \makeatletter
    {\huge
      \@title}\\[\baselineskip]
      To accompany\\
      \emph{Applied Calculus}\\
      by \emph{Tan} \\[\baselineskip]
      \@author\\[\baselineskip]
      Last updated:
      \@date\\
    \makeatother
    \end{center}
  \vspace*{\stretch{1}}
  \thispagestyle{empty}
  \pagebreak
  \pagestyle{headandfoot}

  \renewcommand{\contentsname}{Table Of Contents}
  \renewcommand\thesection{}
  \tableofcontents
  \newpage

  \makeatletter
  \firstpageheader{}{}{}
  \firstpagefooter{\parbox{0.45\linewidth}{\currentname}}{\thepage}{\@title}
  \firstpagefootrule
  \makeatother
  \pagenumbering{arabic}
  \setcounter{page}{1}
  %% everything else

  \relscale{1.4}

  \subfile{subfiles/Tan_appliedCalculus_1p4}
  \subfile{subfiles/Tan_appliedCalculus_2p1}
  \subfile{subfiles/Tan_appliedCalculus_2p2}
  \subfile{subfiles/Tan_appliedCalculus_2p4}
  \subfile{subfiles/Tan_appliedCalculus_2p5}
  \subfile{subfiles/Tan_appliedCalculus_2p6}
  \subfile{subfiles/Tan_appliedCalculus_3p1}
  \subfile{subfiles/Tan_appliedCalculus_3p2}
  \subfile{subfiles/Tan_appliedCalculus_3p3}
  \subfile{subfiles/Tan_appliedCalculus_3p6}
  \subfile{subfiles/Tan_appliedCalculus_3p5}
  \subfile{subfiles/Tan_appliedCalculus_4p1}
  % \subfile{subfiles/Tan_appliedCalculus_4p2}
  % \subfile{subfiles/Tan_appliedCalculus_4p4}
  % \subfile{subfiles/Tan_appliedCalculus_4p5}
  % \subfile{subfiles/Tan_appliedCalculus_5p4}
  % \subfile{subfiles/Tan_appliedCalculus_5p5}
  % \subfile{subfiles/Tan_appliedCalculus_5p6}
  % \subfile{subfiles/Tan_appliedCalculus_6p1}
  % \subfile{subfiles/Tan_appliedCalculus_6p2}
  % \subfile{subfiles/Tan_appliedCalculus_6p5}

\end{document}
