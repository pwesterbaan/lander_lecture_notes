% Custom variables for header and footer of quizzes/exams
\makeatletter
\newcommand*{\class}[1]{\newcommand*{\@class}{#1}}
\newcommand*{\theclass}[0]{\@class}
\newcommand*{\fname}[1][Peter]{\newcommand*{\@fname}{#1}}
\newcommand*{\thefname}[0]{\@fname}
\newcommand*{\lname}[1][Westerbaan]{\newcommand*{\@lname}{#1}}
\newcommand*{\thelname}[0]{\@lname}
\fname\lname
\newcommand*{\collab}[1]{\newcommand*{\@collab}{#1}}
\newcommand*{\thecollab}[0]{\@collab}
\makeatother

%% Custom table column:
  % Math mode
\newcolumntype{L}{>{$}l<{$}}
\newcolumntype{C}{>{$}c<{$}}
\newcolumntype{R}{>{$}r<{$}}
  % Fixed width horizontally center aligned
  % M{2.5in}
  % m{'width'} is vertically centered
\newcolumntype{M}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
  % Centered column for tabularx
\newcolumntype{Y}{>{\centering\arraybackslash}X}
  % Right aligned column for tabularx
\newcolumntype{Z}{>{\raggedleft\arraybackslash}X}


% Custom color for highlighting table cells
\definecolor{hiLiYel}{RGB}{255,255,0}
\newcommand*\cecol{\cellcolor{hiLiYel}}
\newcolumntype{h}{>{\columncolor{hiLiYel}}{c}}

% command to create diagonal line in top left cell of table
\newcommand\mydiagbox[4]{%
  \multicolumn{1}{p{#2}}{\hskip-\tabcolsep
  $\vcenter{\begin{tikzpicture}[baseline=0,anchor=south west,inner sep=#1]
  \path[use as bounding box] (0,0) rectangle (#2+2\tabcolsep,\baselineskip);
  \node[minimum width={#2+2\tabcolsep-\pgflinewidth},
        minimum  height=\baselineskip+\extrarowheight-\pgflinewidth] (box) {};
  \draw[line cap=round] (box.north west) -- (box.south east);
  \node[anchor=south west, yshift=-1pt] at (box.south west) {#3};
  \node[anchor=north east, yshift=2pt] at (box.north east) {#4};
 \end{tikzpicture}}$\hskip-\tabcolsep}}

% ----------------------------------------------------------------
\vfuzz2pt % Don't report over-full v-boxes if over-edge is small
\hfuzz2pt % Don't report over-full h-boxes if over-edge is small
%% THEOREMS -------------------------------------------------------
\theoremstyle{plain}
\newtheorem*{theorem*}{Theorem} %% Theorem without numbering
\newtheorem{theorem}{Theorem}[section]
\newtheorem{thm}{Theorem}
\crefname{assump}{Assumption}{Assumptions}
\Crefname{assump}{Assumption}{Assumptions}
\newtheorem*{assump*}{Assumption}
\newtheorem{assump}{Assumption}[section]
\crefname{conj}{Conjecture}{Conjectures}
\Crefname{conj}{Conjecture}{Conjectures}
\newtheorem{conj}{Conjecture}[section]
\crefname{cor}{Corollary}{Corollaries}
\Crefname{cor}{Corollary}{Corollaries}
\newtheorem{cor}{Corollary}[section]
\crefname{lem}{Lemma}{Lemmas}
\Crefname{lem}{Lemma}{Lemmas}
\newtheorem*{lem*}{Lemma}
\newtheorem{lem}{Lemma}[section]
\crefname{prop}{Proposition}{Propositions}
\Crefname{prop}{Proposition}{Propositions}
\newtheorem{prop}{Proposition}[section]

\crefname{question}{question}{questions}
\Crefname{question}{Question}{Questions}
\crefname{partno}{part}{parts}
\Crefname{partno}{Part}{Parts}

%%
%TODO %%Boxed definition. mdframed box was inconsistent
\newenvironment{thmBox*}[2][]{\setlength{\parindent}{0pt}%
  \begin{framed}
  \textbf{\ifstrempty{#1}{\ }{#1}} %

  #2}{\end{framed}}
\newenvironment{defn*}[2][]{\setlength{\parindent}{0pt}%
  \begin{framed}
  \textbf{Definition. \ifstrempty{#1}{\ }{(#1)}} %

  #2}{\end{framed}}
%\newenvironment{defn*}[1][]{\setlength{\parindent}{0pt}%
%  \begin{mdframed}[frametitle={Definition. \ifstrempty{#1}{\ }{(#1)}}]}%{\end{mdframed}}
%\newframedtheorem{defn*}{Definition}
%\newtheorem*{defn*}{Definition} %% Definition without numbering
%% Defn w/o numbering defined above via mdframed
\theoremstyle{definition}
\newtheorem{defn}{Definition}[section]
\newtheorem*{ex*}{Example}
\newtheorem{ex}{Example}
\newtheorem*{Thm*}{Theorem}
\newtheorem{Thm}{Theorem}
\newtheorem{case}{Case}
\newtheorem{subcase}{Case}
\numberwithin{subcase}{case}
\newtheorem{claim}{Claim}
%%
\theoremstyle{remark}
\newtheorem{rem}{Remark}
%\numberwithin{equation}{section}

%% Special Constants  ----------------------------------------------
% https://nhigham.com/2016/01/28/typesetting-mathematics-according-to-the-iso-standard/
\newcommand{\du}{\ensuremath{\mathrm{d}}}
\newcommand{\eu}{\ensuremath{\mathrm{e}}}
\newcommand{\iu}{\ensuremath{\mathrm{i}}}
\newcommand{\Tn}[1][n]{\ensuremath{\mathrm{T}_#1}}

%% Special Operators ----------------------------------------------
\DeclareMathOperator*{\aff}{aff}
\DeclareMathOperator*{\arccot}{arccot}
\DeclareMathOperator*{\arccsc}{arccsc}
\DeclareMathOperator*{\arcsec}{arcsec}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\aut}{Aut}
\DeclareMathOperator{\Char}{char}
\DeclareMathOperator{\cn}{cn}
\DeclareMathOperator{\col}{col}
\DeclareMathOperator{\cond}{cond}
\DeclareMathOperator{\cone}{Cone}
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\Cor}{Cor}
\DeclareMathOperator{\Corr}{Cor}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\epi}{epi}
\DeclareMathOperator{\inn}{Inn}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\MSE}{MSE}
\DeclareMathOperator{\nullspace}{Null}
\DeclareMathOperator{\proj}{proj}
\DeclareMathOperator{\Rank}{Rank}
\DeclareMathOperator{\Ran}{Ran}
\DeclareMathOperator{\Range}{Range}
\DeclareMathOperator{\range}{range}
\DeclareMathOperator{\row}{Row}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\sn}{sn}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\SSE}{SSE}
\DeclareMathOperator{\SSR}{SSR}
\DeclareMathOperator{\SST}{SST}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\Var}{Var}

%% Special Delimiters ---------------------------------------------
\DeclarePairedDelimiter\abs{\lvert}{\rvert}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}
\DeclarePairedDelimiterX\norm[1]\lVert\rVert{
  \ifblank{#1}{\:\cdot\:}{#1}
  }
% \DeclarePairedDelimiter\parens{(}{)} %does not work in captions
\DeclarePairedDelimiter\sbrkt{[}{]}
\DeclarePairedDelimiter\set{\{}{\}}

\makeatletter
%% swapping \abs and \abs*, etc.
\let\oldabs\abs
\def\abs{\@ifstar{\oldabs}{\oldabs*}}
%
\let\oldceil\ceil
\def\ceil{\@ifstar{\oldceil}{\oldceil*}}
%
\let\oldfloor\floor
\def\floor{\@ifstar{\oldfloor}{\oldfloor*}}
%
\let\oldnorm\norm
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
%
% \let\oldparens\parens
% \def\parens{\@ifstar{\oldparens}{\oldparens*}}
%
\let\oldsbrkt\sbrkt
\def\sbrkt{\@ifstar{\oldsbrkt}{\oldsbrkt*}}
%
\let\oldset\set
\def\set{\@ifstar{\oldset}{\oldset*}}
\makeatother

%% General Macros -------------------------------------------------
\newcommand*{\A}{\mathcal{A}}
\newcommand*{\ahat}{\hat{a}}
\newcommand*{\bbb}{\mathbb{B}}
\newcommand*{\bbc}{\mathbb{C}}
\newcommand*{\bbn}{\mathbb{N}}
\newcommand*{\bbq}{\mathbb{Q}}
\newcommand*{\bbp}{\mathbb{P}}
\newcommand*{\bbr}{\mathbb{R}}
\newcommand*{\bbz}{\mathbb{Z}}
\newcommand*{\bfO}{\mathbf{0}}
\newcommand*{\bfA}{{\bm{A}}}
\newcommand*{\bfb}{{\bm{b}}}
\newcommand*{\bfB}{{\bm{\beta}}}
\newcommand*{\bfc}{{\bm{c}}}
\newcommand*{\bfi}{{\bm{i}}}
\newcommand*{\bfI}{{\bm{I}}}
\newcommand*{\bfj}{{\bm{j}}}
\newcommand*{\bfJ}{{\bm{J}}}
\newcommand*{\bfk}{{\bm{k}}}
\newcommand*{\bfx}{{\bm{x}}}
\newcommand*{\bfX}{{\bm{X}}}
\newcommand*{\bfy}{{\bm{y}}}
\newcommand*{\bfY}{{\bm{Y}}}
\newcommand*{\bfz}{{\bm{z}}}
\newcommand*{\bhat}{\hat{b}}
\newcommand*{\bmO}{\bm{O}}
\newcommand*{\bracket}[1]{{\left\langle #1 \right\rangle}}
\newcommand*{\BX}{\mathbf{B}(X)}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=2pt] (char) {#1};}}
\newcommand*{\contradiction}[1][]{\overset{#1}{\Rightarrow\hspace{-2pt}\Leftarrow}}
\newcommand*{\chat}{\hat{c}}
%% replace "to" with en-dash in cref{,,}
\newcommand{\crefrangeconjunction}{--\,}
\newcommand*{\ctranspose}[1][]{^{#1\mathsf{H}}}
\newcommand*{\ddt}[1][]{{\frac{d^{#1}}{dt^{#1}}}}
\newcommand*{\ddx}[1][]{{\frac{d^{#1}}{dx^{#1}}}}
\newcommand*{\ddy}[1][]{{\frac{d^{#1}}{dy^{#1}}}}
\newcommand*{\dhat}{\hat{d}}
\newcommand*{\ds}{\displaystyle}
\newcommand*{\dydx}[1][]{{\frac{d^{#1}y}{dx^{#1}}}}
\newcommand*{\email}{\href{mailto:pwester@clemson.edu}{pwester@clemson.edu}}
\newcommand*{\eps}{\varepsilon}
%% Overload the \exp command to take an optional argument
\makeatletter
\renewcommand{\exp}{\@ifnextchar[{\expArg}{\expNoArg}}
\newcommand*{\expArg}[1][]{\operatorname{exp}\left\{#1\right\}}
\newcommand*{\expNoArg}{\operatorname{exp}}
\makeatother
\newcommand*{\grad}{\nabla}
\renewcommand{\ij}{{ij}}
\newcommand*{\inprod}[1][\cdot{,}\cdot]{{\left\langle #1 \right\rangle}}
\newcommand*{\indep}{{\perp\hspace*{-0.5em}\perp}}
\newcommand*{\imo}{\bgroup\tmpimo}
\newcommand*{\tmpimo}[1][]{\ifthenelse{\isempty{#1}}{i-1}{i-#1}\egroup}
\newcommand*{\ipo}{\bgroup\tmpipo}
\newcommand*{\tmpipo}[1][]{\ifthenelse{\isempty{#1}}{i+1}{i+#1}\egroup}
\newcommand*{\inv}[1][1]{^{-#1}}
\newcommand*{\ito}[1][1]{_{i=#1}}
%% j\pm1, k\pm1 to be used in sub/superscripts w/ or w/o args
\newcommand*{\kmo}{\bgroup\tmpkmo}
\newcommand*{\tmpkmo}[1][]{\ifthenelse{\isempty{#1}}{k-1}{k-#1}\egroup}
\newcommand*{\kpo}{\bgroup\tmpkpo}
\newcommand*{\tmpkpo}[1][]{\ifthenelse{\isempty{#1}}{k+1}{k+#1}\egroup}
\newcommand*{\jto}[1][1]{_{j=#1}}
\newcommand*{\kto}[1][1]{_{k=#1}}
%%

%% Multi-line entries within a table
%%  O{l} denotes an optional argument with default horizontal alignment 'l'
%%  Call with \lnret{stuff\\things} for left aligned, vert centered
%%  Call with \lnret[l,c,r]{stuff\\things}
%%  Call with \lnret[l,c,r][b,c,t]{stuff\\things}
%\newcommand*{\lnret}[2][l]{\begin{tabular}[#1]{@{}#1@{}}#2\end{tabular}}
\NewDocumentCommand{\lnret}{ O{l} O{c} m }{\begin{tabular}[#2]{@{}#1@{}}#3\end{tabular}}
\newcommand*{\Lap}{\mathscr{L}}
\renewcommand{\liminf}[1][]{\varliminf\limits_{#1}}
\renewcommand{\limsup}[1][]{\varlimsup\limits_{#1}}
\newcommand*{\matlab}{\textsc{Matlab}\xspace}
\newcommand*{\midp}[1][]{\middle)^{#1}\middle(}
\newcommand*{\mmo}{\bgroup\tmpmmo}
\newcommand*{\tmpmmo}[1][]{\ifthenelse{\isempty{#1}}{m-1}{m-#1}\egroup}
\newcommand*{\mpo}{\bgroup\tmpmpo}
\newcommand*{\tmpmpo}[1][]{\ifthenelse{\isempty{#1}}{m+1}{m+#1}\egroup}
\newcommand*{\mtm}{{m\times m}}
\newcommand*{\mtn}{{m\times n}}
\newcommand*{\myStrut}[1][0.9]{\rule{0pt}{#1\baselineskip}}
\newcommand*{\myVec}[1]{{\mathbf{#1}}}
\newcommand*{\nindep}{\not\!\indep}
\newcommand*{\ninfty}{{-\infty}}
%% n\pm1 to be used in sub/superscripts w/ or w/o args
\newcommand*{\nmo}{\bgroup\tmpnmo}
\newcommand*{\tmpnmo}[1][]{\ifthenelse{\isempty{#1}}{n-1}{n-#1}\egroup}
\newcommand*{\npo}{\bgroup\tmpnpo}
\newcommand*{\tmpnpo}[1][]{\ifthenelse{\isempty{#1}}{n+1}{n+#1}\egroup}
\newcommand*{\ntn}{{n\times n}}
%%
\newcommand*{\nto}[1][1]{_{n=#1}}
\newcommand*{\parens}[1]{{\left(#1\right)}}
\newcommand*{\OO}[1]{\mathcal{O}_{#1}}
\newcommand*{\rref}[1][r]{\xrightarrow{#1ref}}  %\ref is already taken. Use \rref[]
\newcommand*{\seteq}{\overset{\textnormal{set}}{=}}
\newcommand*{\sig}{\includegraphics[scale=0.65]{\texFolder/sig.pdf}}
\newcommand*{\Sum}{\displaystyle\sum}
\newcommand*{\st}{\textnormal{ such that }}
\newcommand*{\tcol}[2][red]{\textcolor{#1}{#2}}
\newcommand*{\TikZ}{Ti\textit{k}Z\xspace}
\newcommand*{\To}{\longrightarrow}
% \newcommand*{\transpose}[1][]{^{#1\intercal}}%{^T}%{\!\top\!}}
\newcommand*{\transpose}[1][]{^{#1\mathsf{T}}}
\newcommand*{\vecArrow}[1]{\overrightharp{\ensuremath{#1}}}
\newcommand*{\veca}{\myVec{a}}
\newcommand*{\vecB}{\myVec{B}}
\newcommand*{\vecn}{\myVec{n}}
\newcommand*{\vecN}{\myVec{N}}
\newcommand*{\vecT}{\myVec{T}}
\newcommand*{\vecr}{\myVec{r}}
\newcommand*{\vecu}{\myVec{u}}
\newcommand*{\vecv}{\myVec{v}}
\newcommand*{\vecw}{\myVec{w}}
\newcommand*{\vecx}{\myVec{x}}
\newcommand*{\vecy}{\myVec{y}}
\newcommand*{\vecz}{\myVec{z}}
\newcommand*{\wti}{\widetilde}
\newcommand*{\wha}{\widehat}
\newcommand*{\xto}[1][1]{_{x=#1}}
\newcommand*{\XTX}{\bfX\transpose\bfX}
\newcommand*{\XTy}{\bfX\transpose\bfy}
\newcommand*{\yto}[1][1]{_{y=#1}}
\newcommand*{\yTy}{\bfy\transpose\bfy}
